# SoundStamp 要件定義

## コア機能
1. **環境音録音機能**
   - 10秒間の環境音を録音できる機能
   - MediaRecorder APIを使用

2. **AIによる音声分類**
   - 録音した音をオンデバイスAIが自動で分類
   - TensorFlow.js (量子化YAMNet)を使用
   - 録音した音に適切なラベルを自動付与

3. **スタンプ生成機能**
   - 音声ラベルに基づいた絵文字とカラーパレットの自動生成
   - 音の印象に合わせた視覚的なスタンプを作成

4. **地図へのスタンプ機能**
   - Mapbox v2 LTSを使用
   - 録音した場所に自動生成されたスタンプを配置
   - スタンプのクラスタリング表示

5. **データ永続化機能**
   - Supabase Storageとstampsテーブルを使用
   - 認証なしでもデータを保存可能
   - アプリを閉じても記録を保持

6. **録音音声の再生・管理機能**
   - 録音した音声の波形表示と再生
   - スタンプの削除やラベルの修正機能

7. **コンテキスト情報の自動付与**
   - 時間帯(6時間区切り)の自動タグ付け
   - 天気情報の自動タグ付け (Open-Meteo APIを使用)

### 拡張機能（時間があれば実装）

8. **図鑑コレクション & デイリーチャレンジ**
   - 集めた音のコレクション機能
   - 日々のチャレンジ要素
   - localStorageを活用

9. **共有機能**
   - GIF生成やDeep-Linkによる共有機能
   - SNSへの投稿対応

## コンセプト
- **10秒の軌跡印** (メインコンセプト)
  - あなたの過ぎ去った10秒の軌跡を、地図に静かに印す。(サブコンセプト)

## ユーザーターゲット
- 環境音を聞きたい人
- ASMRを聞くのが好きな人
- 一次的なリフレッシュ
   
## ターゲットユーザー
- 時間・空気・場所に自分が行った事実を残したい人
- 他人に共有したい人

# 解決する課題と背景

## 🎯 解決する課題

### 1. 日常の一瞬が、何も残らず消えてしまう
- 写真や動画などの記録手段は視覚中心で、強い意図が必要。
- 一方、「ふとした一瞬の音」は記録されることが少なく、気づかぬうちに忘れられる。
- 例：駅のアナウンス、雨音、雑踏、風の音など――言葉にできない記憶。

### 2. 自分の"存在"や"足跡"を残したいけど、SNSでは疲れてしまう
- SNSは「誰かに見られる前提」があるため、評価や比較に疲弊する。
- 本当はただ、自分の感覚や思い出を記録したいだけ。
- 評価されない、でも確かにそこに"いた"証が欲しい。

### 3. 音でしか表現できない情緒や記憶がある
- 写真では思い出せない記憶も、音を聞けば蘇ることがある。
- その場の気配、空気感、湿度、季節――音にはそれらが含まれている。
- しかし、音だけを軽やかに記録・共有する手段は少ない。

### 4. 記録はしたいが、「整理する負担」が大きすぎる
- 日記やボイスメモは継続が難しい。整理や管理が必要だから。
- 「ただ録って、地図に残すだけ」で成立するシンプルな記録が求められている。

---

## 🧩 背景（Why now?）

### 1. SNS疲れと"自分だけの記録"回帰
- Z世代を中心に、SNSの過剰な共有文化から距離を取る動きが加速。
- 「見せないけど、残したい」「評価されない記録」が見直されている。

### 2. 地図×ログの新たな価値再発見
- Zenly、Who、Now などの登場により、地図が"思い出メディア"へと変化。
- 視覚だけでなく、「音」による地図ログはより個人性が高く、静かな体験を提供する。

### 3. 音響技術とモバイルAIの進化
- モバイルでも軽量なAIで音の分類・ラベル付けが可能に。
- 録音が「意味ある記録」に自動で昇華される環境が整ってきた。

### 4. 「少しだけ残す」文化の広がり
- BeReal や Now など、「10秒だけ」「その場だけ」といった軽量な記録が支持されている。
- 過剰ではなく、さりげない記録。10秒の音が"記憶のしずく"になる時代へ。

## 参考資料
 インスタのストーリー


## 使用技術

### PWA対応を含めた使用技術構成（Chakra UI採用）

#### フロントエンド（Web + PWA）

| 目的 | 技術・ライブラリ | 理由 |
|------|----------------|------|
| フレームワーク | Next.js | PWA対応もできるReactフレームワーク。SSRや静的生成も対応可能 |
| UIライブラリ | Chakra UI | アクセシビリティに優れたコンポーネント。テーマカスタマイズも柔軟 |
| PWA対応 | Next-PWAプラグイン | Next.jsに簡単にPWA機能（サービスワーカー、オフライン対応）を追加 |
| 音声録音 | MediaRecorder API | ブラウザ標準で録音。PWAでも問題なく動作 |
| 音声再生・波形表示 | wavesurfer.js | オフラインでも使える波形再生UI構築に適している |

#### AI推論（オンデバイス音声分類）

| 目的 | 技術・ライブラリ | 理由 |
|------|----------------|------|
| 音分類モデル | YAMNet（量子化済み） | 軽量かつ高精度でブラウザ上で動作可能 |
| 実行環境 | TensorFlow.js | オフラインでもAI推論ができるためPWAに最適 |

#### 地図表示・スタンプ

| 目的 | 技術・ライブラリ | 理由 |
|------|----------------|------|
| 地図描画 | Mapbox GL JS v2 | オフラインキャッシュ機能も使える（PWA向き） |
| カスタムアイコン・スタンプ | SVG / PNG 絵文字＋16色パレット | 音の印象をビジュアル化しやすい |

#### データ保存・バックエンド

| 目的 | 技術・ライブラリ | 理由 |
|------|----------------|------|
| 永続保存 | Supabase（PostgreSQL + Storage） | オンライン時のデータ同期用。匿名利用可能 |
| オフライン時データ保存 | IndexedDB（idbライブラリ推奨） | ネット未接続時の録音データやスタンプのローカル保存に活用 |
| 同期処理 | Background Sync API（PWA標準） | オフラインで溜めたデータをオンライン復帰時に同期可能 |

#### タグ付与（時間・天気）

| 目的 | 技術・ライブラリ | 理由 |
|------|----------------|------|
| 時間取得 | NTP or JS Date API | オフライン対応はDate APIだが、オンライン時はNTPで正確化可能 |
| 天気取得 | Open-Meteo API | オンライン時に座標から天気情報を取得 |

### 🔧 PWAでのポイントまとめ

- Next.js + next-pwa でビルド時にサービスワーカーを自動生成
- オフライン録音データはIndexedDBに保存し、オンライン復帰後にSupabaseにアップロード
- TensorFlow.jsで音声分類はブラウザ内で完結（ネット不要）
- Mapboxの地図タイルはキャッシュ利用で高速表示可能
- UIはChakra UIでシンプルかつアクセシブルに保つ
